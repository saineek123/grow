<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daily Income App</title>
  <style>
    body { margin: 0; font-family: Arial; background: #f9f9f9; }
    .top-box, .button-row, .product-card, .navbar { margin: 10px; }
    .top-box { display: flex; justify-content: space-around; background: #fff; padding: 10px; border-radius: 10px; }
    .top-box div { text-align: center; }
    .button-row button, .buy-btn { width: 48%; padding: 12px; margin: 5px 1%; border: none; border-radius: 10px; font-weight: bold; }
    .product-card { background: white; border-radius: 10px; padding: 10px; text-align: center; }
    .product-details { display: flex; justify-content: space-between; padding: 5px 0; }
    .buy-btn { background: orange; color: white; margin-top: 10px; }
    .navbar { position: fixed; bottom: 0; left: 0; right: 0; display: flex; justify-content: space-around; background: white; padding: 10px; border-top: 1px solid #ccc; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f6f6f6;
    }
    .top-box {
      display: flex;
      justify-content: space-around;
      padding: 10px;
      background: white;
      border-radius: 10px;
      margin: 10px;
      text-align: center;
    }
    .top-box div {
      flex: 1;
    }
    .top-box h3 {
      margin: 5px 0;
    }

    .button-row {
      display: flex;
      justify-content: space-around;
      margin: 10px;
    }
    .button-row button {
      flex: 1;
      margin: 5px;
      padding: 12px;
      border: none;
      background: #ffe4c4;
      border-radius: 10px;
      font-weight: bold;
    }

    .tabs {
      display: flex;
      justify-content: center;
      margin: 10px;
    }
    .tabs button {
      flex: 1;
      padding: 10px;
      border: none;
      background: #f0f0f0;
      font-weight: bold;
    }
    .tabs .active {
      background: orange;
      color: white;
    }

    .product-card {
      background: white;
      border-radius: 10px;
      margin: 10px;
      padding: 10px;
      text-align: center;
    }
    .product-card img {
      width: 100%;
      border-radius: 10px;
    }
    .product-details {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      font-size: 14px;
    }
    .buy-btn {
      background: linear-gradient(to right, orange, #fca311);
      color: white;
      padding: 10px;
      border: none;
      width: 100%;
      border-radius: 10px;
      font-weight: bold;
      font-size: 16px;
    }

    .navbar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      border-top: 1px solid #ccc;
    }
    .navbar button {
      border: none;
      background: none;
      font-weight: bold;
    }

    @media(max-width: 600px) {
      .product-details {
        flex-direction: column;
        text-align: left;
      }
    }
  </style>
</head>
<body>

  <div class="top-box">
    <div><h3 id="balance">₹ 1000</h3><p>Balance</p></div>
    <div><h3>₹ 0</h3><p>Recharge</p></div>
    <div><h3>₹ 0</h3><p>Total income</p></div>
     <div><h3 id="vipLevel">VIP 0</h3><p>VIP Level</p></div>
  </div>

  <div class="button-row">
    <button onclick="location.href='recharge.html'">Recharge</button>
    <button onclick="location.href='withdraw.html'">Withdraw</button>
    <button onclick="location.href='share.html'">Share</button>
    <button onclick="location.href='online.html'">Online</button>
  </div>

  <div class="tabs">
    <button class="active">Daily income</button>
    <button onclick="location.href='benefits.html'">Benefits Program</button>
  </div>

  <div class="product-card">
    <img src="https://i.ibb.co/Pz0J4QC/lays-yellow.jpg" alt="Plan-A" />
    <h3>Plan-A</h3>
    <div class="product-details">
      <div>₹ 530.00<br/>Price</div>
      <div>₹ 132.00<br/>Daily</div>
    </div>
    <div class="product-details">
      <div>130 Days</div>
      <div>Total: ₹ 17160.00</div>
    </div>
    <button class="buy-btn" onclick="buyPlan(530)">Buy Now</button>
  </div>

  <div class="navbar">
    <button onclick="location.href='index.html'">Home</button>
    <button onclick="location.href='team.html'">Team</button>
    <button onclick="location.href='devices.html'">Devices</button>
    <button onclick="location.href='my.html'">My</button>
  </div>
   <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
 <script>
    // Firebase configuration and initialization
    const firebaseConfig = {
      apiKey: "AIzaSyD7mrPd_JFePxDLA4YifSaYfCsZHCZ7V-E",
      authDomain: "grow-3e3a1.firebaseapp.com",
      databaseURL: "https://grow-3e3a1-default-rtdb.firebaseio.com",
      projectId: "grow-3e3a1",
      storageBucket: "grow-3e3a1.appspot.com",
      messagingSenderId: "285304522946",
      appId: "1:285304522946:web:c423e49a8e0968ce63535b"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();

    auth.onAuthStateChanged(user => {
      if (!user) return location.href = 'login.html';

      const userId = user.uid;
      const userRef = db.ref("users/" + userId);

      userRef.once("value").then(snapshot => {
        const data = snapshot.val() || {};
        const wallet = data.wallet || { recharge: 0, bonus: 0, winning: 0 };
        const total = wallet.recharge + wallet.bonus + wallet.winning;

        document.getElementById("recharge").innerText = "₹ " + wallet.recharge;
        document.getElementById("totalBalance").innerText = "₹ " + total;
        document.getElementById("vipLevel").innerText = data.vipLevel || "VIP 0";
      });

      const productContainer = document.getElementById("productContainer");
      db.ref("products").on("value", snap => {
        productContainer.innerHTML = '';
        snap.forEach(child => {
          const p = child.val();
          const card = document.createElement("div");
          card.className = "product-card";
          card.innerHTML = `
            <img src="${p.image}" style="width:100%; border-radius:10px;">
            <h3>${p.title}</h3>
            <div class="product-details">
              <div>₹ ${p.price}<br/>Price</div>
              <div>₹ ${p.daily}<br/>Daily</div>
            </div>
            <div class="product-details">
              <div>${p.days} Days</div>
              <div>Total: ₹ ${p.daily * p.days}</div>
            </div>
            <button class="buy-btn" onclick="buyNow('${child.key}', ${p.price})">Buy Now</button>
          `;
          productContainer.appendChild(card);
        });
      });
    });

    function buyNow(productId, price) {
      const user = firebase.auth().currentUser;
      if (!user) return alert("Login first");
      const userRef = db.ref("users/" + user.uid);
      userRef.once("value").then(snapshot => {
        const wallet = snapshot.val().wallet || {};
        const total = (wallet.recharge || 0) + (wallet.bonus || 0) + (wallet.winning || 0);
        if (total < price) return alert("Insufficient balance");

        userRef.child("wallet/recharge").set((wallet.recharge || 0) - price);
        alert("✅ Plan Purchased Successfully!");
      });
    }
  </script>
</body>
</html>

