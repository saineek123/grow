
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daily Income App</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    :root {
      --primary: #ff6b00;
      --primary-dark: #e65100;
      --secondary: #4a148c;
      --dark: #222;
      --light: #f8f9fa;
      --gray: #6c757d;
      --success: #28a745;
      --vip-0: #9e9e9e;
      --vip-1: #ff9800;
      --vip-2: #ff5722;
      --vip-3: #f44336;
      --vip-4: #e91e63;
      --vip-5: #9c27b0;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', 'Roboto', sans-serif;
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
      background-attachment: fixed;
      color: #333;
      padding-bottom: 60px;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .header {
      background: linear-gradient(90deg, var(--primary), var(--primary-dark));
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 1.2rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0.1) 75%, transparent 75%);
      background-size: 50px 50px;
    }

    .app-container {
      max-width: 500px;
      margin: 0 auto;
      padding: 15px;
      animation: fadeIn 0.8s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .wallet-box {
      display: flex;
      justify-content: space-around;
      padding: 20px 10px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      margin: 20px 0;
      position: relative;
      overflow: hidden;
    }

    .wallet-box::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--primary), var(--primary-dark));
    }

    .wallet-box div {
      text-align: center;
      flex: 1;
      position: relative;
      padding: 0 5px;
    }

    .wallet-box div:not(:last-child)::after {
      content: "";
      position: absolute;
      top: 50%;
      right: 0;
      transform: translateY(-50%);
      height: 40px;
      width: 1px;
      background: rgba(0, 0, 0, 0.1);
    }

    .wallet-box div span:first-child {
      display: block;
      font-weight: bold;
      font-size: 1.2rem;
      color: var(--primary-dark);
      margin-bottom: 5px;
    }

    .wallet-box div span:last-child {
      display: block;
      font-size: 0.85rem;
      color: var(--gray);
      font-weight: 500;
    }

    .vip-container {
      margin: 25px 0;
      background: linear-gradient(135deg, #141e30, #243b55);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    .vip-banner {
      padding: 15px;
      text-align: center;
      font-weight: bold;
      color: white;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }

    .vip-banner::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg,
          rgba(255, 255, 255, 0.1) 25%,
          transparent 25%,
          transparent 50%,
          rgba(255, 255, 255, 0.1) 50%,
          rgba(255, 255, 255, 0.1) 75%,
          transparent 75%);
      background-size: 50px 50px;
      opacity: 0.3;
      z-index: -1;
    }

    .vip-level {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 8px;
    }

    .vip-level .crown {
      margin-right: 10px;
      font-size: 1.4rem;
      color: gold;
      text-shadow: 0 0 5px rgba(255, 215, 0, 0.7);
    }

    .vip-progress {
      padding: 15px;
      background: rgba(0, 0, 0, 0.2);
    }

    .progress-label {
      display: flex;
      justify-content: space-between;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.85rem;
      margin-bottom: 8px;
    }

    .progress-container {
      height: 12px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), gold);
      border-radius: 10px;
      width: 65%;
      position: relative;
    }

    .progress-bar::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      background-size: 200% 100%;
      animation: shine 2s infinite;
    }

    @keyframes shine {
      0% {
        background-position: -200% 0;
      }

      100% {
        background-position: 200% 0;
      }
    }

    .quick-actions {
      display: flex;
      justify-content: space-around;
      background: rgba(255, 255, 255, 0.95);
      padding: 20px 0;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      margin: 25px 0;
    }

    .quick-actions a {
      text-align: center;
      text-decoration: none;
      color: var(--dark);
      font-size: 0.85rem;
      font-weight: 500;
      transition: transform 0.3s;
      flex: 1;
    }

    .quick-actions a:hover {
      transform: translateY(-5px);
    }

    .quick-actions a div {
      font-size: 1.8rem;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 10px;
      border-radius: 50%;
      color: white;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      box-shadow: 0 4px 8px rgba(255, 107, 0, 0.3);
    }

    .tabs {
      display: flex;
      justify-content: center;
      margin: 25px 0;
      gap: 10px;
    }

    .tabs button {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border: none;
      color: white;
      padding: 10px 20px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 4px 10px rgba(255, 107, 0, 0.3);
      transition: all 0.3s;
    }

    .tabs button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(255, 107, 0, 0.4);
    }

    .tabs button:active {
      transform: translateY(0);
    }

    .plans-container {
      margin: 20px 0;
    }

    .section-title {
      color: white;
      font-size: 1.3rem;
      margin-bottom: 15px;
      text-align: center;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .section-title i {
      margin-right: 10px;
      color: var(--primary);
    }

    /* Product Card Styles */
    .product-card {
      background: rgba(255, 255, 255, 0.95);
      margin: 15px 0;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
      border-left: 4px solid var(--primary);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .vip-badge {
      position: absolute;
      top: 10px;
      right: -30px;
      background: linear-gradient(135deg, #ffd700, #ff9800);
      color: #7d6608;
      padding: 5px 30px;
      font-size: 0.8rem;
      font-weight: bold;
      transform: rotate(45deg);
      width: 120px;
      text-align: center;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
    }
    
    .already-invested {
      position: absolute;
      top: 10px;
      left: -30px;
      background: linear-gradient(135deg, #4CAF50, #2E7D32);
      color: white;
      padding: 5px 30px;
      font-size: 0.8rem;
      font-weight: bold;
      transform: rotate(-45deg);
      width: 120px;
      text-align: center;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
      z-index: 2;
    }

    .product-card h3 {
      margin: 0 0 15px;
      font-size: 1.3rem;
      color: var(--primary-dark);
      display: flex;
      align-items: center;
    }

    .product-card h3 i {
      margin-right: 10px;
      color: var(--primary);
    }

    .product-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
      margin: 15px 0;
      font-size: 1rem;
    }

    .product-details div {
      text-align: center;
      padding: 10px;
      background: rgba(255, 107, 0, 0.1);
      border-radius: 8px;
      font-weight: 500;
    }

    .product-details div span {
      display: block;
      font-weight: bold;
      color: var(--primary-dark);
      font-size: 1.1rem;
      margin-bottom: 5px;
    }

    .buy-btn {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      padding: 12px;
      text-align: center;
      border-radius: 8px;
      text-decoration: none;
      display: block;
      font-weight: bold;
      margin-top: 15px;
      border: none;
      width: 100%;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(255, 107, 0, 0.3);
      transition: all 0.3s;
    }
    
    .buy-btn.already-invested-btn {
      background: linear-gradient(135deg, #9e9e9e, #757575);
      cursor: not-allowed;
    }

    .buy-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(255, 107, 0, 0.4);
    }

    .buy-btn:active {
      transform: translateY(0);
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-around;
      padding: 12px 0;
      box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(5px);
      z-index: 100;
    }

    .bottom-nav a {
      color: var(--gray);
      text-decoration: none;
      text-align: center;
      font-size: 0.8rem;
      flex: 1;
      transition: color 0.3s;
    }

    .bottom-nav a.active {
      color: var(--primary-dark);
      font-weight: bold;
    }

    .bottom-nav a div {
      font-size: 1.4rem;
      margin-bottom: 5px;
    }

    .vip-benefits {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 20px;
      margin: 25px 0;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
    }

    .vip-benefits h3 {
      color: var(--primary-dark);
      text-align: center;
      margin-bottom: 15px;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .vip-benefits h3 i {
      margin-right: 10px;
      color: gold;
    }

    .benefit-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .benefit-item {
      flex: 1;
      min-width: 120px;
      text-align: center;
      padding: 10px;
      background: rgba(255, 215, 0, 0.1);
      border-radius: 10px;
      border: 1px solid rgba(255, 215, 0, 0.3);
    }

    .benefit-item i {
      font-size: 1.5rem;
      color: gold;
      margin-bottom: 8px;
    }

    .benefit-item span {
      display: block;
      font-weight: 500;
      font-size: 0.85rem;
    }

    /* VIP Level Colors */
    .vip-0 {
      background: linear-gradient(135deg, var(--vip-0), #757575);
    }

    .vip-1 {
      background: linear-gradient(135deg, var(--vip-1), #f57c00);
    }

    .vip-2 {
      background: linear-gradient(135deg, var(--vip-2), #e64a19);
    }

    .vip-3 {
      background: linear-gradient(135deg, var(--vip-3), #d32f2f);
    }

    .vip-4 {
      background: linear-gradient(135deg, var(--vip-4), #c2185b);
    }

    .vip-5 {
      background: linear-gradient(135deg, var(--vip-5), #7b1fa2);
    }

    /* Celebration Modal */
    .celebration-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.5s;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .celebration-content {
      position: relative;
      background: linear-gradient(135deg, #ff6b00, #ff9800);
      width: 90%;
      max-width: 400px;
      border-radius: 20px;
      overflow: hidden;
      text-align: center;
      padding: 30px;
      box-shadow: 0 15px 50px rgba(255, 107, 0, 0.5);
      animation: scaleIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes scaleIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .celebration-content::before {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
      animation: rotate 20s linear infinite;
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .celebration-icon {
      font-size: 5rem;
      color: gold;
      margin: 20px 0;
      text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
      animation: bounce 1.5s ease infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    .celebration-content h2 {
      font-size: 2rem;
      color: white;
      margin: 15px 0;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .celebration-content p {
      font-size: 1.2rem;
      color: rgba(255,255,255,0.9);
      margin-bottom: 25px;
      line-height: 1.5;
    }

    .celebration-btn {
      background: white;
      color: #ff6b00;
      border: none;
      padding: 12px 30px;
      border-radius: 30px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }

    .celebration-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }

    .celebration-btn:active {
      transform: translateY(0);
    }

    .countdown-timer {
      font-size: 1.5rem;
      font-weight: bold;
      color: white;
      margin-top: 15px;
      text-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }

    /* Confetti effect */
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #f00;
      opacity: 0.8;
      animation: confetti-fall 5s linear infinite;
    }

    @keyframes confetti-fall {
      0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(1000px) rotate(720deg); opacity: 0; }
    }

    /* Fireworks effect */
    .firework {
      position: absolute;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      animation: explode 1s ease-out;
    }

    @keyframes explode {
      0% { transform: scale(1); opacity: 1; box-shadow: 0 0 10px #fff; }
      100% { transform: scale(10); opacity: 0; }
    }
    
    .connection-status {
      position: fixed;
      top: 10px;
      right: 10px;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      background: #28a745;
      color: white;
    }
    
    .loading {
      text-align: center;
      padding: 20px;
      color: white;
      font-size: 1.2rem;
    }
    
    .loading i {
      font-size: 2rem;
      margin-bottom: 10px;
      color: var(--primary);
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .payout-container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 20px;
      margin: 25px 0;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    
    .payout-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .payout-title {
      font-size: 1.2rem;
      color: var(--primary-dark);
      font-weight: bold;
    }
    
    .payout-amount {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--success);
    }
    
    .payout-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .payout-item {
      background: rgba(40, 167, 69, 0.1);
      padding: 10px;
      border-radius: 8px;
      text-align: center;
    }
    
    .payout-item span {
      display: block;
      font-size: 0.9rem;
      color: var(--gray);
      margin-bottom: 5px;
    }
    
    .payout-item strong {
      display: block;
      font-size: 1.1rem;
      color: var(--dark);
    }
    
    .claim-btn {
      background: linear-gradient(135deg, var(--success), #1e7e34);
      color: white;
      padding: 12px;
      text-align: center;
      border-radius: 8px;
      border: none;
      width: 100%;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(40, 167, 69, 0.3);
      transition: all 0.3s;
    }
    
    .claim-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(40, 167, 69, 0.4);
    }
    
    .claim-btn:disabled {
      background: var(--gray);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .daily-income-highlight {
      text-align: center;
      background: linear-gradient(135deg, #ff9800, #ff6b00);
      color: white;
      padding: 15px;
      border-radius: 15px;
      margin: 20px 0;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
      font-weight: bold;
      font-size: 1.1rem;
    }
  </style>
</head>

<body>

  <div class="connection-status">
    <i class="fas fa-wifi"></i> Online
  </div>

  <div class="header">
    <h1><i class="fas fa-wallet"></i> Groww Daily</h1>
    <p>Earn daily income with premium plans</p>
  </div>

  <div class="app-container">
    <!-- Wallet Box -->
    <div class="wallet-box">
      <div>
        <span id="rechargeAmount">â‚¹0</span>
        <span>Recharge</span>
      </div>
      <div>
        <span id="earningsAmount">â‚¹0</span>
        <span>Total Income</span>
      </div>
      <div>
        <span id="totalBalance">â‚¹0</span>
        <span>Total Balance</span>
      </div>
    </div>
    
    <div class="daily-income-highlight">
      <i class="fas fa-calendar-check"></i> Daily Income: <span id="dailyIncomeAmount">â‚¹0</span>
    </div>

    <div class="vip-container">
      <div class="vip-banner vip-1" id="vipBanner">
        <h3>VIP <span id="vipLevel">0</span> Activated</h3>
        <div class="vip-level">
          <i class="fas fa-crown"></i>
          <p>Get More Benefits & Higher Daily Income</p>
        </div>
      </div>
      <div class="vip-progress">
        <div class="progress-label">
          <span>VIP <span id="currentVip">0</span></span>
          <span>VIP <span id="nextVip">1</span></span>
        </div>
        <div class="progress-container">
          <div class="progress-bar" id="vipProgress" style="width: 0%"></div>
        </div>
        <p style="color: rgba(255,255,255,0.7); text-align: center; margin-top: 10px; font-size: 0.9rem;">
          Recharge â‚¹<span id="rechargeNeeded">0</span> more to reach next level
        </p>
      </div>
    </div>

    <div class="quick-actions">
      <a href="recharge.html" id="rechargeBtn">
        <div><i class="fas fa-rupee-sign"></i></div>
        Recharge
      </a>
      <a href="withdraw.html">
        <div><i class="fas fa-money-bill-wave"></i></div>
        Withdraw
      </a>
      <a href="invite.html">
        <div><i class="fas fa-share-alt"></i></div>
        Share
      </a>
      <a href="online.html">
        <div><i class="fas fa-headset"></i></div>
        Support
      </a>
    </div>

    <div class="tabs">
      <button class="active">Daily Income</button>
      <button>Benefits Program</button>
    </div>
    
    <div class="payout-container">
      <div class="payout-header">
        <div class="payout-title"><i class="fas fa-calendar-day"></i> Daily Income</div>
        <div class="payout-amount" id="dailyPayout">â‚¹0</div>
      </div>
      
      <div class="payout-details">
        <div class="payout-item">
          <span>Available</span>
          <strong id="availableIncome">â‚¹0</strong>
        </div>
        <div class="payout-item">
          <span>Next Payout</span>
          <strong id="nextPayoutTime">00:00:00</strong>
        </div>
      </div>
      
      <button class="claim-btn" id="claimBtn" disabled>
        <i class="fas fa-hand-holding-usd"></i> Claim Daily Income
      </button>
    </div>

    <div class="plans-container">
      <h2 class="section-title"><i class="fas fa-chart-line"></i> Daily Income Plans</h2>
      <div id="loadingPlans" class="loading">
        <i class="fas fa-spinner"></i>
        <p>Loading income plans...</p>
      </div>
      <div id="planList"></div>
    </div>

    <div id="productList">
      <!-- Product cards will be loaded dynamically -->
    </div>

    <div class="vip-benefits">
      <h3><i class="fas fa-crown"></i> VIP Benefits</h3>
      <div class="benefit-list">
        <div class="benefit-item">
          <i class="fas fa-money-bill-wave"></i>
          <span>Higher Daily Income</span>
        </div>
        <div class="benefit-item">
          <i class="fas fa-gift"></i>
          <span>Daily Bonus</span>
        </div>
        <div class="benefit-item">
          <i class="fas fa-user-friends"></i>
          <span>Priority Support</span>
        </div>
        <div class="benefit-item">
          <i class="fas fa-rocket"></i>
          <span>Faster Withdrawals</span>
        </div>
      </div>
    </div>
  </div>

  <div class="bottom-nav">
    <a href="index.html" class="active">
      <div><i class="fas fa-home"></i></div>
      Home
    </a>
    <a href="investments.html">
      <div><i class="fas fa-clipboard-list"></i></div>
      Income
    </a>
    <a href="invite.html">
      <div><i class="fas fa-user-friends"></i></div>
      Team
    </a>
    <a href="my.html">
      <div><i class="fas fa-user"></i></div>
      Profile
    </a>
  </div>

  <!-- Celebration Modal -->
  <div class="celebration-modal" id="celebrationModal">
    <div class="celebration-content">
      <div class="celebration-icon">
        <i class="fas fa-trophy"></i>
      </div>
      <h2>Congratulations!</h2>
      <p>You've successfully claimed your daily income!</p>
      <p>Your earnings have been added to your wallet.</p>
      
      <div class="countdown-timer" id="countdownTimer">
        Closing in 3 seconds...
      </div>
      
      <button class="celebration-btn" id="closeCelebration">
        <i class="fas fa-check-circle"></i> Continue Now
      </button>
    </div>
  </div>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyD7mrPd_JFePxDLA4YifSaYfCsZHCZ7V-E",
      authDomain: "grow-3e3a1.firebaseapp.com",
      databaseURL: "https://grow-3e3a1-default-rtdb.firebaseio.com",
      projectId: "grow-3e3a1"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();
    
    // DOM references
    const rechargeAmount = document.getElementById('rechargeAmount');
    const totalIncome = document.getElementById('earningsAmount');
    const totalBalance = document.getElementById('totalBalance');
    const dailyIncomeAmount = document.getElementById('dailyIncomeAmount');
    const dailyPayout = document.getElementById('dailyPayout');
    const availableIncome = document.getElementById('availableIncome');
    const nextPayoutTime = document.getElementById('nextPayoutTime');
    const claimBtn = document.getElementById('claimBtn');
    const celebrationModal = document.getElementById('celebrationModal');
    const closeCelebrationBtn = document.getElementById('closeCelebration');
    const countdownTimer = document.getElementById('countdownTimer');
    const loadingPlans = document.getElementById('loadingPlans');
    const productList = document.getElementById('productList');
    const vipLevel = document.getElementById('vipLevel');
    const currentVip = document.getElementById('currentVip');
    const nextVip = document.getElementById('nextVip');
    const vipProgress = document.getElementById('vipProgress');
    const rechargeNeeded = document.getElementById('rechargeNeeded');
    
    let currentUser = null;
    let countdownInterval;
    let dailyIncome = 0;
    let payoutTimer;
    let lastClaimTime = null;

    // Close celebration modal
    function closeCelebration() {
      celebrationModal.style.display = 'none';
      clearInterval(countdownInterval);
    }

    closeCelebrationBtn.addEventListener('click', closeCelebration);

    // Create confetti effect
    function createConfetti() {
      const colors = ['#ff6b00', '#ff9800', '#4CAF50', '#2196F3', '#9C27B0', '#FFEB3B'];
      const container = document.body;
      
      for (let i = 0; i < 150; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.animationDelay = Math.random() * 5 + 's';
        confetti.style.animationDuration = (Math.random() * 3 + 3) + 's';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.width = (Math.random() * 10 + 5) + 'px';
        confetti.style.height = (Math.random() * 10 + 5) + 'px';
        container.appendChild(confetti);
        
        // Remove after animation completes
        setTimeout(() => {
          if (confetti.parentNode) {
            confetti.parentNode.removeChild(confetti);
          }
        }, 8000);
      }
    }

    // Create fireworks effect
    function createFireworks() {
      const container = document.body;
      const colors = ['#ff6b00', '#ff9800', '#FFEB3B', '#4CAF50', '#2196F3'];
      
      for (let i = 0; i < 20; i++) {
        const firework = document.createElement('div');
        firework.className = 'firework';
        firework.style.left = Math.random() * 100 + 'vw';
        firework.style.top = Math.random() * 50 + 'vh';
        firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        firework.style.animationDelay = Math.random() * 1 + 's';
        container.appendChild(firework);
        
        // Remove after animation completes
        setTimeout(() => {
          if (firework.parentNode) {
            firework.parentNode.removeChild(firework);
          }
        }, 1000);
      }
    }

    // Show celebration modal with countdown
    function showCelebration() {
      celebrationModal.style.display = 'flex';
      createConfetti();
      createFireworks();
      
      let seconds = 3;
      countdownTimer.textContent = `Closing in ${seconds} seconds...`;
      
      countdownInterval = setInterval(() => {
        seconds--;
        countdownTimer.textContent = `Closing in ${seconds} second${seconds !== 1 ? 's' : ''}...`;
        
        if (seconds <= 0) {
          closeCelebration();
        }
      }, 1000);
      
      // Create more fireworks periodically
      const fireworksInterval = setInterval(() => {
        createFireworks();
      }, 1500);
      
      // Stop after 10 seconds
      setTimeout(() => {
        clearInterval(fireworksInterval);
      }, 10000);
    }

    // Load user wallet data from Firebase
    function loadWalletData(uid) {
      const walletRef = db.ref("users/" + uid + "/wallet");
      walletRef.on("value", snapshot => {
        const wallet = snapshot.val() || { recharge: 0, Earnings: 0 };
        const recharge = wallet.recharge || 0;
        const earnings = wallet.Earnings || 0;
        const total = recharge + earnings;

        rechargeAmount.textContent = `â‚¹${recharge.toFixed(2)}`;
        totalIncome.textContent = `â‚¹${earnings.toFixed(2)}`;
        totalBalance.textContent = `â‚¹${total.toFixed(2)}`;
      });
    }
    
    // Initialize daily income payout system
    function initDailyPayout(uid) {
      // Get user's daily income from their investments
      const userRef = db.ref("users/" + uid);

      const investmentsRef = db.ref("purchases/" + uid);
      investmentsRef.on("value", snapshot => {
        dailyIncome = 0;
        
        if (snapshot.exists()) {
          snapshot.forEach(child => {
            const investment = child.val();
            if (investment.status === "active") {
              // Daily income is stored in dailyIncome field
              dailyIncome += investment.dailyIncome || 0;
            }
          });
        }
        
        dailyIncomeAmount.textContent = `â‚¹${dailyIncome.toFixed(2)}`;
        dailyPayout.textContent = `â‚¹${dailyIncome.toFixed(2)}`;
        availableIncome.textContent = `â‚¹${dailyIncome.toFixed(2)}`;
        
        // Enable claim button if there's income to claim
        claimBtn.disabled = dailyIncome <= 0;
      });
      
      // Load last claim time
      userRef.once("value").then(snapshot => {
  const userData = snapshot.val() || {};
  if (userData.lastClaim) {
    lastClaimTime = new Date(userData.lastClaim);
  } else {
    // ðŸ”¥ Default: allow claim now (set old date)
    lastClaimTime = new Date(Date.now() - 25 * 60 * 60 * 1000); // 25 hours ago
    userRef.update({
      lastClaim: lastClaimTime.toISOString()
    });
  }
  startPayoutTimer();
});
    }
    
    // Start the payout countdown timer
    function startPayoutTimer() {
      if (payoutTimer) clearInterval(payoutTimer);
      
      // Set next payout time
      let nextPayout;
      
      if (lastClaimTime) {
        // 24 hours from last claim
        nextPayout = new Date(lastClaimTime.getTime() + 24 * 60 * 60 * 1000);
      } else {
        // Set to next midnight
        const now = new Date();
        nextPayout = new Date(now);
        nextPayout.setDate(nextPayout.getDate() + 1);
        nextPayout.setHours(0, 0, 0, 0);
      }
      
      updatePayoutTimer(nextPayout);
      
      // Update timer every second
      payoutTimer = setInterval(() => {
        updatePayoutTimer(nextPayout);
      }, 1000);
    }
    
   function updatePayoutTimer(targetTime) {
  const now = new Date();
  const diff = targetTime - now;

  if (diff <= 0) {
    // Check if already claimed today
    const today = now.toISOString().split("T")[0];
    const lastDate = lastClaimTime ? lastClaimTime.toISOString().split("T")[0] : null;

    if (lastDate === today) {
      nextPayoutTime.textContent = "Claimed";
      claimBtn.disabled = true;
    } else {
      nextPayoutTime.textContent = "Ready!";
      claimBtn.disabled = dailyIncome <= 0;
    }
    return;
  }

  // Timer countdown
  const hours = Math.floor(diff / (1000 * 60 * 60));
  const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((diff % (1000 * 60)) / 1000);
  
  nextPayoutTime.textContent = `${hours.toString().padStart(2, '0')}:${minutes
    .toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
  claimBtn.disabled = true;
}

    
    // Claim daily income
    function claimDailyIncome() {
      if (!currentUser || dailyIncome <= 0) return;
      
      const uid = currentUser.uid;
      const walletRef = db.ref("users/" + uid + "/wallet");
      const userRef = db.ref("users/" + uid);
      
      walletRef.once("value").then(snapshot => {
        const wallet = snapshot.val() || { recharge: 0, Earnings: 0 };
        const newEarnings = (wallet.Earnings || 0) + dailyIncome;
        
        // Update wallet
        db.ref("users/" + uid + "/wallet").set({
          ...wallet,
          Earnings: newEarnings
        });
        
        // Update last claim time
        const now = new Date();
        lastClaimTime = now;
        userRef.update({
          lastClaim: now.toISOString()
        });
        
        // Show celebration
        showCelebration();
        
        // Reset claim button until next payout
        claimBtn.disabled = true;
        startPayoutTimer();
      }).catch(error => {
        alert("Error claiming income: " + error.message);
      });
    }
    
    // Add event listener to claim button
    claimBtn.addEventListener('click', claimDailyIncome);

    // Load investment products from Firebase
    function loadProducts() {
      const productsRef = db.ref("products");
      
      productsRef.on("value", snapshot => {
        loadingPlans.style.display = "none";
        productList.innerHTML = "";
        
        if (!snapshot.exists()) {
          productList.innerHTML = `
            <div class="loading">
              <i class="fas fa-exclamation-triangle"></i>
              <p>No income plans available at the moment</p>
            </div>
          `;
          return;
        }
        
        // Get user's existing investments
        let userInvestments = {};
        if (currentUser) {
          const investmentsRef = db.ref("purchases/" + currentUser.uid);
          investmentsRef.once("value").then(investSnapshot => {
            if (investSnapshot.exists()) {
              investSnapshot.forEach(child => {
                const investment = child.val();
                userInvestments[investment.planId] = true;
              });
            }
            
            // Now render products with investment status
            snapshot.forEach(child => {
              const product = child.val();
              const key = child.key;
              const isInvested = !!userInvestments[key];
              renderProductCard(product, key, isInvested);
            });
          });
        } else {
          // Demo mode - show all products as available
          snapshot.forEach(child => {
            const product = child.val();
            const key = child.key;
            renderProductCard(product, key, false);
          });
        }
      }, error => {
        loadingPlans.style.display = "none";
        productList.innerHTML = `
          <div class="loading">
            <i class="fas fa-exclamation-triangle"></i>
            <p>Failed to load income plans: ${error.message}</p>
          </div>
        `;
      });
    }
    
    // Render product card with investment status
    function renderProductCard(product, key, isInvested) {
      const card = document.createElement("div");
      card.className = "product-card";
      
      card.innerHTML = `
        ${product.badge ? `<div class="vip-badge">${product.badge}</div>` : ''}
        ${isInvested ? `<div class="already-invested">Invested</div>` : ''}
        <h3><i class="fas fa-box"></i> ${product.name}</h3>
        <p style="color: var(--gray); margin-bottom: 15px;">${product.description}</p>
        <div class="product-details">
          <div><span>â‚¹${product.minInvestment}</span>Min Investment</div>
          <div><span>â‚¹${product.dailyIncome}</span>Daily Income</div>
          <div><span>${product.duration} days</span>Duration</div>
        </div>
        <button class="buy-btn ${isInvested ? 'already-invested-btn' : ''}" 
                data-id="${key}" 
                data-cost="${product.minInvestment}" 
                data-income="${product.dailyIncome}"
                ${isInvested ? 'disabled' : ''}>
          <i class="fas fa-shopping-cart"></i> 
          ${isInvested ? 'Already Invested' : `Invest Now - â‚¹${product.minInvestment}`}
        </button>
      `;
      
      productList.appendChild(card);
      
      // Add event listener if not invested
      if (!isInvested) {
        const button = card.querySelector('.buy-btn');
        button.addEventListener('click', function() {
          const planId = this.getAttribute('data-id');
          const cost = parseFloat(this.getAttribute('data-cost'));
          const dailyIncome = parseFloat(this.getAttribute('data-income'));
          buyProduct(planId, cost, dailyIncome);
        });
      }
    }

    // Buy product function
    function buyProduct(planId, cost, dailyIncome) {
      if (!currentUser) {
        alert("Please login first");
        return;
      }

      const uid = currentUser.uid;
      const walletRef = db.ref("users/" + uid + "/wallet");
      const purchaseRef = db.ref("purchases/" + uid + "/" + planId);

      // First check if user already invested in this plan
      purchaseRef.once("value").then(snapshot => {
        if (snapshot.exists()) {
          alert("You have already invested in this plan!");
          return;
        }

        walletRef.once("value").then(snapshot => {
          const wallet = snapshot.val() || { recharge: 0, Earnings: 0 };
          const total = (wallet.recharge || 0) + (wallet.Earnings || 0);

          if (total < cost) {
            alert("âŒ Insufficient balance!");
            return;
          }

          // Deduct from wallet
          let updated = { ...wallet };
          if (wallet.recharge >= cost) {
            updated.recharge = wallet.recharge - cost;
          } else {
            const remaining = cost - wallet.recharge;
            updated.recharge = 0;
            updated.Earnings = wallet.Earnings - remaining;
          }

          // Update wallet
          db.ref("users/" + uid + "/wallet").set(updated);
          
          // Record purchase with daily income
          db.ref("purchases/" + uid + "/" + planId).set({
            planId: planId,
            amount: cost,
            dailyIncome: dailyIncome,
            purchasedAt: new Date().toISOString(),
            status: "active"
          });

          // Show celebration
          showCelebration();
          
          // Reload products to update UI
          loadProducts();
        }).catch(error => {
          alert("Error processing purchase: " + error.message);
        });
      });
    }

    // Initialize the app
    document.addEventListener('DOMContentLoaded', function() {
      // Set up recharge button
      document.getElementById('rechargeBtn').addEventListener('click', function(e) {
        e.preventDefault();
         window.location.href = "recharge.html";
      });
      
      // Initialize Firebase auth
      auth.onAuthStateChanged(user => {
        if (user) {
          currentUser = user;
          loadWalletData(user.uid);
          loadProducts();
          initDailyPayout(user.uid);
          autoClaimDailyIncomeIfNeeded();

          
          // For demo - set VIP level based on recharge amount
          db.ref("users/" + user.uid + "/wallet").once("value").then(snapshot => {
            const wallet = snapshot.val() || { recharge: 0 };
            const rechargeAmount = wallet.recharge || 0;
            
            // Simple VIP calculation for demo
            if (rechargeAmount >= 10000) {
              vipLevel.textContent = "3";
              currentVip.textContent = "3";
              nextVip.textContent = "4";
              vipProgress.style.width = "40%";
              rechargeNeeded.textContent = "5000";
              document.getElementById('vipBanner').className = "vip-banner vip-3";
            } else if (rechargeAmount >= 5000) {
              vipLevel.textContent = "2";
              currentVip.textContent = "2";
              nextVip.textContent = "3";
              vipProgress.style.width = "60%";
              rechargeNeeded.textContent = "3000";
              document.getElementById('vipBanner').className = "vip-banner vip-2";
            } else if (rechargeAmount >= 1000) {
              vipLevel.textContent = "1";
              currentVip.textContent = "1";
              nextVip.textContent = "2";
              vipProgress.style.width = "30%";
              rechargeNeeded.textContent = "2000";
              document.getElementById('vipBanner').className = "vip-banner vip-1";
            }
          });
        } else {
          // Not logged in - use demo mode
          currentUser = { uid: "demoUser" };
          rechargeAmount.textContent = "â‚¹5000";
          totalIncome.textContent = "â‚¹1250";
          totalBalance.textContent = "â‚¹6250";
          dailyIncomeAmount.textContent = "â‚¹250";
          dailyPayout.textContent = "â‚¹250";
          availableIncome.textContent = "â‚¹250";
          vipLevel.textContent = "1";
          currentVip.textContent = "1";
          nextVip.textContent = "2";
          vipProgress.style.width = "65%";
          rechargeNeeded.textContent = "3500";
          document.getElementById('vipBanner').className = "vip-banner vip-1";
          loadProducts();
          startPayoutTimer();
        }
      });
    });

function autoClaimDailyIncomeIfNeeded() {
  if (!currentUser || dailyIncome <= 0) return;
  if (lastClaimDate === today) return; // Already claimed


  const uid = currentUser.uid;
  const now = new Date();
  const today = now.toISOString().split("T")[0]; // yyyy-mm-dd

  const userRef = db.ref("users/" + uid);
  userRef.once("value").then(snapshot => {
    const userData = snapshot.val() || {};
    const lastClaimDate = userData.lastClaim ? userData.lastClaim.split("T")[0] : null;

    // Check if not already claimed today and time is after 12:10 AM
    if (lastClaimDate !== today && now.getHours() === 0 && now.getMinutes() >= 10) {
      const walletRef = db.ref("users/" + uid + "/wallet");

      walletRef.once("value").then(walletSnap => {
        const wallet = walletSnap.val() || {};
        const currentEarnings = wallet.Earnings || 0;

        walletRef.update({
          ...wallet,
          Earnings: currentEarnings + dailyIncome
        });

        userRef.update({
          lastClaim: now.toISOString()
        });

        console.log("âœ… Auto daily income added");
        showCelebration(); // Bonus animation/sound
      });
    }
  });
}


  </script>
</body>
</html>

